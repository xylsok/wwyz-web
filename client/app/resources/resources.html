<navbar></navbar>
<div class="flex-full-view-free">
	<div class="container">
		<div class="bgc-fff padding-20">
			<div class="well well-sm">
				<div class="margin-bottom-20 text-center margin-top-10">
					<span class="font-size-16">资源类型分布:</span>
						<span ng-repeat="(k,v) in docTypes" class="font-size-16 margin-right-10">
							<span ng-if="k">{{k}}:</span> <span class="color-red">{{v.length}}</span>
						</span>
				</div>
				<form class="form-horizontal" role="form">
					<div class="form-group">
						<label class="col-sm-2 control-label">主导资源类型:</label>
						<div class="col-sm-1">
							<input type="text" ng-model="MainrestInfo.type" class="form-control input-sm">
						</div>
						<label class="col-sm-2 control-label">主导资源预计总数量:</label>
						<div class="col-sm-1">
							<input type="text" ng-model="MainrestInfo.count" class="form-control input-sm">
						</div>
						<div class="col-sm-6">
							<a href="#" ng-click="btnBar.save()" class="btn btn-primary btn-metro btn-sm"> <i
								class="fa fa-save"></i> 保 存</a>
							<a href="#" ng-click="btnBar.refresh()" class="btn btn-default btn-metro btn-sm"> <i
								class="fa fa-refresh"></i> 刷新本页</a>
							<a href="#" ng-click="btnBar.goCourseList()" class="btn btn-default btn-metro btn-sm"> <i
								class="fa fa-reply"></i> 返回首页</a>
							<a class="btn btn-default btn-metro btn-sm" href="metel:course|metel_course,{{rno}}">
								<i class="fa fa-pencil"></i> 编辑课程</a>
							<a class="btn btn-default btn-metro btn-sm"
							   ng-href="metel:resource|{{currentUser.shortName}},metel,{{rno}}">
								<i class="fa fa-edit"></i> 编辑资源
							</a>
						</div>
					</div>
				</form>
			</div>
			<!--<div class="well well-sm text-center padding-bottom-0">-->
			<!--</div>-->
			<div class="well well-sm text-center padding-bottom-0">
				<div class="font-size-18 margin-bottom-10">
					<span ng-if="health.required">
						必填字段:"{{health.required}}",
					</span>
					<span ng-if="health.wrong">
						警告:"{{health.wrong}}",
					</span>
					<span ng-if="health.mainres" class="color-red">
						主导资源类型有问题
					</span>
				</div>
				<div class="margin-bottom-4 font-size-16">
					共有资源 <span class="color-red">{{resources.length}}</span> 个,其中有 <span class="color-red">{{noFileSizeCum}}</span>
					个FileSize为非真值。
				</div>
				<div class="margin-bottom-10 font-size-16">
					<span>RNO: {{health.rno}}</span>
					<input type="hidden" class="form-control" placeholder="Enter text to copy" ng-model="health.rno">
					<button class="btn btn-xs btn-metro btn-default" ng-click="copyRno._copyRno()" clip-copy="health.rno"><i class="fa fa-copy"></i> 复制</button>
					<span class="copy-msg" ng-if="copyRno.msg">
						<img class="max-18" src="assets/images/checkmark.png"/> {{copyRno.msg}}
					</span>
				</div>
			</div>
			<div class="text-right" ng-if="resources && resources.length">
				<back-to-top class="back_top" style="position: fixed; top:80%" title="返回顶部">
					<img class="max-128 fa-click" src="assets/images/timg.png" alt=""/>
				</back-to-top>
			</div>
			<div class="table-responsive">
				<table class="table table-bordered">
					<thead>
						<tr>
							<th>ID</th>
							<th>Title</th>
							<th>DocType</th>
							<th>FileType</th>
							<th>FileName</th>
							<th>FileSize</th>
							<th>发布</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-class="{'danger':s.error}" ng-repeat="s  in resources|orderBy:'filesize'">
							<td>{{s.id}}</td>
							<td>{{s.title}}</td>
							<td class="text-center">
								<a href="#" ng-click="core._setDocType(s.id)">{{s.doctype||'--'}}</a>
							</td>
							<td><a href="#" ng-click="core._setFileType(s.id)">{{s.filetype||'--'}}</a></td>
							<td>{{s.filename}}</td>
							<td ng-class="{'color-red':!s.filesize}">{{s.filesize}}</td>
							<td ng-class="{'color-red':!s.haspublished}">{{s.haspublished}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
<footer></footer>
<script type="text/ng-template" id="docTypesTemplate.html">
	<div style="width: 500px;">
		<div class="row">
			<div class="col-sm-3" ng-repeat="s in core.docTypes">
				{{s.code}}-{{s.name}}
			</div>
		</div>
	</div>
</script>
